{"version":3,"file":"906-bec95e1a32bdde4b5f5b.js","mappings":"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","sources":["webpack://portfolio-3d/./src/components/Book.tsx","webpack://portfolio-3d/./node_modules/@react-three/drei/core/useAnimations.js"],"sourcesContent":["/*\nAuto-generated by: https://github.com/pmndrs/gltfjsx\nCommand: npx gltfjsx@6.2.16 static/models/book.glb -k -t \n*/\n\nimport * as THREE from 'three';\nimport React, { useRef, useState } from 'react';\nimport { useGLTF, useAnimations, useScroll } from '@react-three/drei';\nimport { GLTF } from 'three-stdlib';\nimport { prefix } from '../utility/environment';\nimport { useFrame } from '@react-three/fiber';\n\ntype GLTFResult = GLTF & {\n  nodes: {\n    book_cover002: THREE.Mesh;\n    book_cover002_1: THREE.Mesh;\n    book_cover002_2: THREE.Mesh;\n    book_cover003: THREE.Mesh;\n    book_cover003_1: THREE.Mesh;\n  };\n  materials: {\n    Base_sheets: THREE.MeshStandardMaterial;\n    book_cover: THREE.MeshStandardMaterial;\n    Presentation: THREE.MeshPhysicalMaterial;\n  };\n  animations: GLTFAction[];\n};\n\ntype ActionName = 'book_upAction.001' | 'book_dwnAction.001';\ninterface GLTFAction extends THREE.AnimationClip {\n  name: ActionName;\n}\ntype ContextType = Record<string, React.ForwardRefExoticComponent<JSX.IntrinsicElements['mesh']>>;\n\nconst Book = (props: JSX.IntrinsicElements['group']) => {\n  const group = useRef<THREE.Group>(null);\n  const { nodes, materials, animations } = useGLTF(prefix + '/models/book.glb') as GLTFResult;\n  const { actions } = useAnimations(animations, group);\n\n  const [animated, setAnimated] = useState<boolean>(false);\n\n  const data = useScroll();\n\n  useFrame(() => {\n    console.log(data.offset);\n    if (!animated && data.offset > 0.26) {\n      setAnimated(true);\n      for (const a of animations) {\n        const animObj = actions[a.name];\n        if (animObj) {\n          animObj.reset();\n          animObj.timeScale = 1;\n          animObj.setLoop(THREE.LoopOnce, 1);\n          animObj.clampWhenFinished = true;\n          animObj.play();\n        }\n      }\n    }\n    if (animated && (data.offset > 0.4 || data.offset < 0.26)) {\n      setAnimated(false);\n      for (const a of animations) {\n        const animObj = actions[a.name];\n        if (animObj) {\n          animObj.paused = false;\n          animObj.timeScale = -1;\n          animObj.setLoop(THREE.LoopOnce, 1);\n          animObj.play();\n        }\n      }\n    }\n    // else if (data.offset > 1) for (const a of closing) closeBook[a.name]?.reset().play();\n  });\n\n  return (\n    <group ref={group} {...props} dispose={null}>\n      <group name=\"Scene\">\n        <group name=\"book_up\" position={[0.301, 0, 0.008]} rotation={[-Math.PI, -Math.PI / 2, 0]} scale={0.942}>\n          <mesh name=\"book_cover002\" geometry={nodes.book_cover002.geometry} material={materials.Base_sheets} />\n          <mesh name=\"book_cover002_1\" geometry={nodes.book_cover002_1.geometry} material={materials.book_cover} />\n          <mesh name=\"book_cover002_2\" geometry={nodes.book_cover002_2.geometry} material={materials.Presentation} />\n        </group>\n        <group name=\"book_dwn\" position={[0.301, -0.138, 0.353]} rotation={[-Math.PI, -Math.PI / 2, 0]} scale={0.942}>\n          <mesh name=\"book_cover003\" geometry={nodes.book_cover003.geometry} material={materials.Base_sheets} />\n          <mesh name=\"book_cover003_1\" geometry={nodes.book_cover003_1.geometry} material={materials.book_cover} />\n        </group>\n      </group>\n    </group>\n  );\n};\n\nuseGLTF.preload(prefix + '/models/book.glb');\nexport default Book;\n\n","import * as React from 'react';\nimport { Object3D, AnimationMixer } from 'three';\nimport { useFrame } from '@react-three/fiber';\n\nfunction useAnimations(clips, root) {\n  const ref = React.useRef();\n  const [actualRef] = React.useState(() => root ? root instanceof Object3D ? {\n    current: root\n  } : root : ref);\n  // eslint-disable-next-line prettier/prettier\n  const [mixer] = React.useState(() => new AnimationMixer(undefined));\n  React.useLayoutEffect(() => {\n    if (root) actualRef.current = root instanceof Object3D ? root : root.current;\n    mixer._root = actualRef.current;\n  });\n  const lazyActions = React.useRef({});\n  const api = React.useMemo(() => {\n    const actions = {};\n    clips.forEach(clip => Object.defineProperty(actions, clip.name, {\n      enumerable: true,\n      get() {\n        if (actualRef.current) {\n          return lazyActions.current[clip.name] || (lazyActions.current[clip.name] = mixer.clipAction(clip, actualRef.current));\n        }\n      },\n      configurable: true\n    }));\n    return {\n      ref: actualRef,\n      clips,\n      actions,\n      names: clips.map(c => c.name),\n      mixer\n    };\n  }, [clips]);\n  useFrame((state, delta) => mixer.update(delta));\n  React.useEffect(() => {\n    const currentRoot = actualRef.current;\n    return () => {\n      // Clean up only when clips change, wipe out lazy actions and uncache clips\n      lazyActions.current = {};\n      mixer.stopAllAction();\n      Object.values(api.actions).forEach(action => {\n        if (currentRoot) {\n          mixer.uncacheAction(action, currentRoot);\n        }\n      });\n    };\n  }, [clips]);\n  return api;\n}\n\nexport { useAnimations };\n"],"names":["useGLTF","preload","prefix","props","group","useRef","nodes","materials","animations","actions","clips","root","ref","actualRef","Object3D","current","mixer","AnimationMixer","undefined","_root","lazyActions","api","forEach","clip","Object","defineProperty","name","enumerable","get","clipAction","configurable","names","map","c","state","delta","update","currentRoot","stopAllAction","values","action","uncacheAction","useAnimations","animated","setAnimated","useState","data","useScroll","useFrame","console","log","offset","a","animObj","reset","timeScale","setLoop","THREE","clampWhenFinished","play","paused","React","assign","dispose","position","rotation","Math","PI","scale","geometry","book_cover002","material","Base_sheets","book_cover002_1","book_cover","book_cover002_2","Presentation","book_cover003","book_cover003_1"],"sourceRoot":""}